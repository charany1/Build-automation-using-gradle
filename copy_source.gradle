//This file contains tasks to collect and copy files for packaging into sourceDir(s).


//importing tasks from other files
apply from : 'clean.gradle'

ext {
    //Common for both CC and CC 2014
    manifests = 'manifests'
    extras = 'Extras'

    //For CC only
    sourceDirCC = 'build/adobe/src/adobe-cc'
    manifestCC = 'manifestCC.xml'

    //For CC 2014 only
    sourceDirCC2014 = 'build/adobe/src/adobe-cc2014'
    manifestCC2014 = 'manifestCC2014.xml'
}



//Copies files corresponding to CC version.
task copyFilesCC(type:Copy,dependsOn: clean){

    description 'Task for copying files corresponding to CC version.'

    from(manifests){
        include(manifestCC )
        rename (manifestCC , 'manifest.xml')
        into ('CSXS')
    }
    from('ExtensionContent'){
        include('**/*')
    }

    from('Extras'){
        include('**/*')
    }
    exclude('.*') //to exclude project files generated by IDE
    into (sourceDirCC)


    //informative messages
    doFirst{
        println("Copying files for CC  version...")
    }
    doLast{
        println("Copying files for CC  version...DONE.")
    }
}



//Copies files corresponding to CC 2014 version.
task copyFilesCC2014(type:Copy,dependsOn: clean){

    description 'Task for copying files corresponding to cc 2014 version.'

    from(manifests){
        include(manifestCC2014)
        rename(manifestCC2014,'manifest.xml')
        into ('CSXS')
    }
    from('ExtensionContent'){
        include('**/*')
    }

    from(extras) {
        include('**/*')

    }
    exclude('.*')//to exclude project files generated by IDE
    into (sourceDirCC2014)



    //informative messages
    doFirst{
        println("Copying files for CC 2014 version...")
    }
    doLast{
        println("Copying files for CC 2014 version...DONE.")
    }

}

